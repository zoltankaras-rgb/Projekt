<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modul Kancelária</title>
  <link rel="icon" href="data:;base64,iVBORw0KGgo=">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://www.gstatic.com/charts/loader.js"></script>
  <script src="https://cdn.tiny.cloud/1/m0x3edzazvvmnbeg7c3u9nxprdbgfcecgv9w8m8a64jgz49c/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
  <style>
    :root {
      --primary-color: #f65c5c; --primary-hover: #7c3aed; --secondary-color: #6b7280;
      --secondary-hover: #4b5563; --success-color: #16a34a; --warning-color: #f59e0b;
      --danger-color: #ef4444; --danger-hover: #dc2626; --light-gray: #f9fafb;
      --medium-gray: #e5e7eb; --dark-gray: #374151; --font-family: 'Inter', sans-serif;
      --border-radius: 0.5rem; --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    }
    html, body { height: 100%; margin: 0; padding: 0; overflow: hidden; }
    body { font-family: var(--font-family); background-color: var(--light-gray); color: var(--dark-gray); display: flex; justify-content: center; align-items: center; }
    .hidden { display: none !important; }
    .login-wrapper { width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; padding: 2rem; box-sizing: border-box; }
    .login-container { width: 100%; max-width: 400px; padding: 2.5rem; background-color: white; border-radius: var(--border-radius); box-shadow: var(--shadow); }
    .login-container h2 { text-align: center; margin-top: 0; }
    .app-container { width: 100%; height: 100%; display: flex; flex-direction: column; background-color: white; }
    .app-header { background-color: var(--primary-color); color: white; padding: 1rem 1.5rem; flex-shrink: 0; display: flex; justify-content: space-between; align-items: center; z-index: 20;}
    .app-header h1 { margin: 0; font-size: 1.5rem; } .app-header p { margin: 0.25rem 0 0; opacity: 0.8; font-size: 0.9rem; }
    .main-layout { display: flex; flex-grow: 1; overflow: hidden; }
    .sidebar { width: 240px; background-color: #fff; border-right: 1px solid var(--medium-gray); padding: 1.5rem 1rem; flex-shrink: 0; overflow-y: auto; }
    .sidebar-nav { list-style: none; padding: 0; margin: 0; }
    .sidebar-nav a { display: flex; align-items: center; padding: 0.75rem 1rem; border-radius: var(--border-radius); text-decoration: none; color: var(--dark-gray); font-weight: 500; transition: background-color 0.2s, color 0.2s; cursor: pointer; }
    .sidebar-nav a:hover { background-color: var(--light-gray); } .sidebar-nav a.active { background-color: var(--primary-color); color: white; }
    .sidebar-nav a i { margin-right: 0.75rem; width: 20px; text-align: center; }
    .main-content { flex: 1; padding: 2rem; overflow-y: auto; }
    .content-section { display: none; } .content-section.active { display: block; }
    h3 { font-size: 1.5rem; margin-top: 0; margin-bottom: 1.5rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--medium-gray); }
    h4 { margin-top: 1.5rem; margin-bottom: 1rem; }
    .form-group { margin-bottom: 1rem; } .form-group label { font-weight: 500; margin-bottom: 0.25rem; display: block; }
    input, select, textarea { width: 100%; padding: 0.75rem; border-radius: 0.375rem; border: 1px solid var(--medium-gray); box-sizing: border-box; font-family: inherit; font-size: 1rem; }
    button { padding: 0.75rem 1rem; color: white; border: none; border-radius: 0.375rem; cursor: pointer; font-size: 0.9rem; font-weight: 600; transition: background-color 0.2s; display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem; }
    .btn-primary { background-color: var(--primary-color); } .btn-primary:hover { background-color: var(--primary-hover); }
    .btn-success { background-color: var(--success-color); } .btn-warning { background-color: var(--warning-color); }
    .btn-danger { background-color: var(--danger-color); } .btn-danger:hover { background-color: var(--danger-hover); }
    .btn-info { background-color: #0ea5e9; } .btn-secondary { background-color: var(--secondary-color); color: white; }
    .btn-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; }
    .table-container { max-height: 400px; overflow-y: auto; border: 1px solid var(--medium-gray); border-radius: var(--border-radius); }
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 0.75rem 1rem; text-align: left; border-bottom: 1px solid var(--medium-gray); }
    th { background-color: var(--light-gray); font-weight: 600; position: sticky; top: 0; z-index: 10; }
    tfoot tr.total-row td { font-weight: bold; background-color: var(--light-gray); border-top: 2px solid var(--medium-gray); }
    .loss { color: var(--danger-color); font-weight: bold; }
    .gain { color: var(--success-color); font-weight: bold; }
    .b2b-tab-nav { display: flex; border-bottom: 1px solid var(--medium-gray); margin-bottom: 1.5rem; flex-wrap: wrap; }
    .b2b-tab-button { background: none; border: none; padding: 0.75rem 1rem; cursor: pointer; font-weight: 600; color: var(--secondary-color); border-bottom: 3px solid transparent; }
    .b2b-tab-button.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
    .b2b-tab-content { display: none; } .b2b-tab-content.active { display: block; }
    #modal-container { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; justify-content: center; align-items: center; }
    .modal-backdrop { position: absolute; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
    .modal-content { background-color: white; padding: 2rem; border-radius: var(--border-radius); z-index: 1001; width: 90%; max-width: 950px; max-height: 90vh; display: flex; flex-direction: column; }
    .modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--medium-gray); padding-bottom: 1rem; margin-bottom: 1rem; }
    .modal-header h3 { margin: 0; border: none; }
    .close-btn { background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--secondary-color); }
    .modal-body { overflow-y: auto; }
    .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .analysis-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
    .stat-card { background-color: var(--light-gray); padding: 1.5rem; border-radius: var(--border-radius); border: 1px solid var(--medium-gray); }
    .stat-card h5 { margin: 0 0 0.5rem 0; color: var(--secondary-color); font-size: 0.9rem; }
    .stat-card p { margin: 0; font-size: 1.75rem; font-weight: 700; }
  </style>
</head>
<body>
  <div id="login-wrapper" class="login-wrapper">
    <div class="login-container">
      <h2><i class="fas fa-briefcase"></i> Modul Kancelária</h2>
      <form id="login-form">
        <div class="form-group"><label for="username">Používateľské meno:</label><input type="text" id="username" required autocomplete="username"></div>
        <div class="form-group"><label for="password">Heslo:</label><input type="password" id="password" required autocomplete="current-password"></div>
        <button type="submit" class="btn-primary" style="width: 100%;">Prihlásiť sa</button>
      </form>
    </div>
  </div>

  <div id="app-container" class="app-container hidden">
    <header class="app-header">
      <div><h1>Modul Kancelária</h1><p id="user-info">Vitajte, ...</p></div>
      <button id="logout-button" class="btn-danger"><i class="fas fa-sign-out-alt"></i> Odhlásiť sa</button>
    </header>
    <div class="main-layout">
      <aside class="sidebar">
        <ul class="sidebar-nav">
          <li><a class="sidebar-link active" data-section="section-dashboard"><i class="fas fa-chart-line"></i> Dashboard</a></li>
          <li><a class="sidebar-link" data-section="section-stock"><i class="fas fa-warehouse"></i> Sklad</a></li>
          <li><a class="sidebar-link" data-section="section-planning"><i class="fas fa-calendar-alt"></i> Plánovanie</a></li>
          <li><a class="sidebar-link" data-section="section-order-forecast"><i class="fas fa-shipping-fast"></i> Expedičný Plán</a></li>
          <li><a class="sidebar-link" data-section="section-erp-admin"><i class="fas fa-cogs"></i> Správa ERP</a></li>
          <li><a class="sidebar-link" data-section="section-b2b-admin"><i class="fas fa-users-cog"></i> B2B Admin</a></li>
          <li><a class="sidebar-link" data-section="section-b2c-admin"><i class="fas fa-shopping-basket"></i> B2C Správa</a></li>
          <li><a class="sidebar-link" data-section="section-haccp"><i class="fas fa-file-shield"></i> HACCP</a></li>
          <li><a class="sidebar-link" data-section="section-fleet"><i class="fas fa-truck"></i> Vozový park</a></li>
          <li><a class="sidebar-link" data-section="section-hygiene"><i class="fas fa-soap"></i> Hygienický režim</a></li>
          <li><a class="sidebar-link" data-section="section-profitability"><i class="fas fa-euro-sign"></i> Ziskovosť/Kalkulácie</a></li>
          <li><a class="sidebar-link" data-section="section-costs"><i class="fas fa-wallet"></i> Správa Nákladov</a></li>
        </ul>
      </aside>
      <main class="main-content">
        <div id="section-dashboard" class="content-section active"></div>
        <div id="section-stock" class="content-section"></div>
        <div id="section-planning" class="content-section"></div>
        <div id="section-order-forecast" class="content-section"></div>
        <div id="section-erp-admin" class="content-section"></div>
        <div id="section-b2b-admin" class="content-section"></div>
        <div id="section-b2c-admin" class="content-section"></div>
        <div id="section-haccp" class="content-section"></div>
        <div id="section-fleet" class="content-section"></div>
        <div id="section-hygiene" class="content-section"></div>
        <div id="section-profitability" class="content-section"></div>
        <div id="section-costs" class="content-section"></div>
      </main>
    </div>
  </div>

  <div id="modal-container"></div>

  <!-- Skripty: bez duplikátov, v správnom poradí -->
  <script src="/static/js/common.js" defer></script>

  <script src="/static/js/kancelaria_modules/dashboard.js" defer></script>
  <script src="/static/js/kancelaria_modules/stock.js" defer></script>
  <script src="/static/js/kancelaria_modules/planning.js" defer></script>
  <script src="/static/js/kancelaria_modules/order_forecast.js" defer></script>
  <script src="/static/js/kancelaria_modules/erp_admin.js" defer></script>
  <script src="/static/js/kancelaria_modules/b2b_admin.js" defer></script>
  <script src="/static/js/kancelaria_modules/b2c_admin.js" defer></script>
  <script src="/static/js/kancelaria_modules/haccp.js" defer></script>
  <script src="/static/js/kancelaria_modules/fleet.js" defer></script>
  <script src="/static/js/kancelaria_modules/hygiene.js" defer></script>

  <script src="/static/js/kancelaria.js" defer></script>
  <script src="/static/js/profitability.js" defer></script>
  <script src="/static/js/costs.js" defer></script>
</body>
</html>
